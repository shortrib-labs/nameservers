# Nameserver Configuration Template
# Copy this file to params.yaml and fill in your values
# Then encrypt with: make encrypt
---
domain: lab.example.com              # Your domain name
image_name: ubuntu-24.04-server-cloudimg-amd64.img  # Ubuntu cloud image in Prism

ssh:
  authorized_keys:
    - ssh-ed25519 AAAA... your-key   # Your SSH public key

users:
  - default
  - name: REDACTED                   # Your username
    gecos: Your Name                 # Your full name
    groups:
      - users
      - adm
      - sudo
      - ssher
    ssh_import_id:
      - gh:REDACTED                  # Your GitHub username
    sudo: ALL=(ALL) NOPASSWD:ALL
    lock_passwd: true

nameservers:
  primary: cooper                    # Primary nameserver hostname
  secondaries:
    - maltman                        # Secondary nameserver hostnames
    - stillman
  resolver_ips:                      # IPs for resolver service (one per server)
    - 10.105.0.252
    - 10.105.0.253
    - 10.105.0.254
  auth_ips:                          # IPs for authoritative service (one per server)
    - 10.105.0.2
    - 10.105.0.3
    - 10.105.0.4

node:
  cpus: 1                            # vCPUs per nameserver
  memory: 1024                       # Memory in MiB
  disk_size: 40                      # Disk size in GB

nutanix:
  prism_central: prism.example.com   # Prism Central IP or FQDN
  username: admin                    # Prism Central username
  password: REDACTED                 # Prism Central password (SOPS-encrypted)
  cluster: homelab                   # Nutanix cluster name
  storage_container: null            # Storage container (null for default)

octodns:
  allowed_ranges:                    # IP ranges allowed for zone updates
    - 10.105.0.0/24

tls:
  # TLS certificate for DNS-over-TLS and DNS-over-QUIC
  # These will be SOPS-encrypted
  cert: |
    -----BEGIN CERTIFICATE-----
    YOUR_CERTIFICATE_HERE
    -----END CERTIFICATE-----
  key: |
    -----BEGIN PRIVATE KEY-----
    YOUR_PRIVATE_KEY_HERE
    -----END PRIVATE KEY-----
  ca: |
    -----BEGIN CERTIFICATE-----
    YOUR_CA_CERTIFICATE_HERE
    -----END CERTIFICATE-----

# Optional: Tailscale for remote access
tailscale:
  auth_key: REDACTED                 # Tailscale auth key (SOPS-encrypted)
